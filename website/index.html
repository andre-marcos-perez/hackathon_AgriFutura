<!DOCTYPE html>
<html>

  <head>
    <title>FarMate | Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/andreMarcosPerez/hackathon_AgriFutura/master/website/static/image/farmate_logo.png"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Comfortaa"/>
    <link rel="stylesheet" href="static/css/index.css">
    <link rel="javascript" href="static/javascript/index.js">
</style>
  </head>
  <body>
    <header>
      <div class="navbar">
        <nav style="background-color: #455A64">
          <div class="nav-wrapper container">
            <span href="#" class="brand-logo center"><b>Dashboard</b></span>
            <ul id="nav-mobile" class="left hide-on-med-and-down">
              <li><img src="https://raw.githubusercontent.com/andreMarcosPerez/hackathon_AgriFutura/master/website/static/image/farmate_logo.png" style="height:25px;width:auto"></li>
              <li><span style="margin-left:10px"><b>FarMate</b></span></li>
            </ul>
          </div>
        </nav>
      </div>
    </header>
    <main>
      <div class="container">
        <div class="row">
          <div class="col s12">
            <div class="row">
              <div class="col l4 s12">
                <div class="row">
                  <div class="col s12">
                    <div class="card z-depth-2 hoverable">
                      <div class="card-content" id="sidemap">
                        <b>Quantidade de água no solo</b>
                        <div class="divider"></div>
                        <div class="center">
                            <h3 id="us1"></h3>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col s12">
                    <div class="card z-depth-2 hoverable">
                      <div class="card-content" id="sidemap">
                        <b>Umidade relativa do ar</b>
                        <div class="divider"></div>
                        <div class="center">
                            <h3 id="ua1"></h3>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col s12">
                    <div class="card z-depth-2 hoverable">
                      <div class="card-content" id="sidemap">
                        <b>Temperatura ambiente</b>
                        <div class="divider"></div>
                        <div class="center">
                            <h3 id="ta1"></h3>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col l8 s12">
                <div class="card z-depth-2 hoverable">
                  <div class="card-content" style="padding-bottom:10px;">
                    <div id="map"></div>
                    <script>
                      function initMap() {
                        var map = new google.maps.Map(document.getElementById('map'), {
                          zoom: 16,
                          center: {lat: -11.897547, lng: -49.128725},
                          mapTypeId: google.maps.MapTypeId.SATELLITE
                        });
                        var polygonA = [
                          {lat: -11.901271, lng: -49.128828},
                          {lat: -11.900906, lng: -49.130245},
                          {lat: -11.899902, lng: -49.131692},
                          {lat: -11.898323, lng: -49.132447},
                          {lat: -11.896782, lng: -49.132442},
                          {lat: -11.895069, lng: -49.131480},
                          {lat: -11.894240, lng: -49.130203},
                          {lat: -11.893976, lng: -49.128918},
                          {lat: -11.901271, lng: -49.128828}
                        ];
                        var areaA = new google.maps.Polygon({
                          paths: polygonA,
                          strokeColor: '#FF0000',
                          strokeOpacity: 0.8,
                          strokeWeight: 2,
                          fillColor: '#FF0000',
                          fillOpacity: 0.35
                        });
                        areaA.setMap(map);
                        var polygonB = [
                          {lat: -11.901271, lng: -49.128828},
                          {lat: -11.900906, lng: -49.127245},
                          {lat: -11.899991, lng: -49.126046},
                          {lat: -11.898713, lng: -49.125260},
                          {lat: -11.896626, lng: -49.125244},
                          {lat: -11.894972, lng: -49.126290},
                          {lat: -11.894157, lng: -49.127686},
                          {lat: -11.893976, lng: -49.128918},
                          {lat: -11.901271, lng: -49.128828}
                        ];
                        var areaB = new google.maps.Polygon({
                          paths: polygonB,
                          strokeColor: '#FF9800',
                          strokeOpacity: 0.8,
                          strokeWeight: 2,
                          fillColor: '#FF9800',
                          fillOpacity: 0.35
                        });
                        areaB.setMap(map);
                      }
                    </script>
                    <script async defer
                      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCApdV04VZ8C7OK99XoFBlFl11zGtRvF04&callback=initMap">
                    </script>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col s12">
            <div class="col l4 s12">
              <div class="card z-depth-2 hoverable">
                <div class="card-content" style="padding:0px">
                  <canvas id="soil_umidity_a" width="400" height="400"></canvas>
                </div>
              </div>
            </div>
            <div class="col l4 s12">
              <div class="card z-depth-2 hoverable">
                <div class="card-content" style="padding:0px">
                  <canvas id="air_umidity_a" width="400" height="400"></canvas>
                </div>
              </div>
            </div>
            <div class="col l4 s12">
              <div class="card z-depth-2 hoverable">
                <div class="card-content" style="padding:0px">
                  <canvas id="air_temperature_a" width="400" height="400"></canvas>
                </div>
              </div>
            </div>
          </div>
          <div class="col s12">
            <div class="row">
              <div class="col l4 s12">
                <div class="card z-depth-2 hoverable">
                  <div class="card-content" id="sidemap">
                    <b>Quantidade de água no solo</b>
                    <div class="divider"></div>
                    <div class="center">
                        <h3 id="us2"></h3>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col l4 s12">
                <div class="card z-depth-2 hoverable">
                  <div class="card-content" id="sidemap">
                    <b>Umidade relativa do ar</b>
                    <div class="divider"></div>
                    <div class="center">
                        <h3 id="ua2"></h3>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col l4 s12">
                <div class="card z-depth-2 hoverable">
                  <div class="card-content" id="sidemap">
                    <b>Temperatura ambiente</b>
                    <div class="divider"></div>
                    <div class="center">
                        <h3 id="ta2"></h3>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col s12">
                <div class="col l4 s12">
                  <div class="card z-depth-2 hoverable">
                    <div class="card-content" style="padding:0px">
                      <canvas id="soil_umidity_b" width="400" height="400"></canvas>
                    </div>
                  </div>
                </div>
                <div class="col l4 s12">
                  <div class="card z-depth-2 hoverable">
                    <div class="card-content" style="padding:0px">
                      <canvas id="air_umidity_b" width="400" height="400"></canvas>
                    </div>
                  </div>
                </div>
                <div class="col l4 s12">
                  <div class="card z-depth-2 hoverable">
                    <div class="card-content" style="padding:0px">
                      <canvas id="air_temperature_b" width="400" height="400"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer class="page-footer" style="background-color: #455A64">
      <div class="container">
        <div class="row">
          <div class="col l4 s12">
            <div class="card z-depth-0" style="padding-top:10px;background-color:#455A64">
              <div class="card-image">
                <img src="https://raw.githubusercontent.com/andreMarcosPerez/hackathon_AgriFutura/master/website/static/image/farmate_logo.png" style="display:block;margin-left:auto;margin-right: auto;height:125px;width:auto">
              </div>
            </div>
          </div>
          <div class="col l8 s12">
            <div class="container">
              <p class="grey-text text-lighten-4">
                Nós da <b>FARMATE</b>  ajudamos você a tornar sua produção mais eficiente.
                Com dados coletados em tempo real sobre mercado, qualidade do seu solo e clima, mostramos a hortaliça certa para cultivar.
                Assim, você poupa tempo, lucra mais e evita desperdícios.
                Ajude a tornar o mundo mais verde e venha inovar com a gente!
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <div class="container" class="grey-text text-lighten-4">
          © 2018 |
					<a class="grey-text text-lighten-4" href="https://www.linkedin.com/in/andremarcosperez/" target="_blank"><b>André Perez</b></a> |
          <a class="grey-text text-lighten-4" href="https://www.linkedin.com/in/guilherme-rocha-gon%C3%A7alves-69b070142/" target="_blank"><b>Guilherme Rocha</b></a> |
          <a class="grey-text text-lighten-4" href="http://lattes.cnpq.br/1678583473479877" target="_blank"><b>Luíza Zuvanov</b></a> |
          <a class="grey-text text-lighten-4" href="https://www.linkedin.com/in/leonardoparente/" target="_blank"><b>Leonardo Parente</b></a> |
          <a class="grey-text text-lighten-4" href="https://www.linkedin.com/in/rafaelbenatti/" target="_blank"><b>Rafael Benatti</b></a>
        </div>
      </div>
    </footer>
    <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
    <script type="text/javascript" src="static/javascript/sensor_a.js"></script>
    <script type="text/javascript" src="static/javascript/sensor_b.js"></script>
    <script>
      $(document).ready(function(){
        $(".button-collapse").sideNav();
      });
    </script>
    <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
    <script>
      var config = {
        apiKey: "AIzaSyCgdPmCY3Xk0KesTngcyzXMme7PtPUU3h0",
        authDomain: "agrifutura-99921.firebaseapp.com",
        databaseURL: "https://agrifutura-99921.firebaseio.com",
        projectId: "agrifutura-99921",
        storageBucket: "agrifutura-99921.appspot.com",
        messagingSenderId: "1026468338204"
      };
      firebase.initializeApp(config);
      var db = firebase.database();
      db.ref("/zona1").on("value",function(snapshot) {
        $('#ta1').text(snapshot.val().temperature + ' °C');
        $('#ua1').text(snapshot.val().humidity + ' %');

        if (snapshot.val().hidrometer < 20) {

          $('#us1').text('seco');

        } else if(snapshot.val().hidrometer < 50) {

          $('#us1').text('úmido');
        }
        else{

          $('#us1').text('molhado');
        }
      });
      db.ref("/zona2").on("value",function(snapshot) {
        $('#ta2').text(snapshot.val().temperature + ' °C');
        $('#ua2').text(snapshot.val().humidity + ' %');

        if (snapshot.val().hidrometer < 20) {

          $('#us2').text('seco');

        } else if(snapshot.val().hidrometer < 50) {

          $('#us2').text('úmido');
        }
        else{

          $('#us2').text('molhado');
        }
      });
    </script>
  </body>
</html>
